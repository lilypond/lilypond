@c -*- coding: utf-8; mode: texinfo; documentlanguage: ja -*-
@ignore
    Translation of GIT committish: 0cc270b871321ae5aa8622cea8d8262aafd16641

    When revising a translation, copy the HEAD committish of the
    version that you are working on.  See TRANSLATION for details.
@end ignore

@c \version "2.21.0"

@c Translators: Tomohiro Tatejima, Yoshiki Sawada, Hiroshi Fukuhara
@c Translation status: post-GDP


@node ピッチ
@section ピッチ
@translationof Pitches

@lilypondfile[quote]{snippets/pitches-headword.ly}

このセクションでは音符のピッチを指定する方法について議論します。@c
このプロセスには 3 つのステップがあります: 入力、変更、出力です。

@menu
* ピッチを記述する::
* 複数のピッチを変更する::
* ピッチを表示する::
* 符頭::
@end menu


@node ピッチを記述する
@subsection ピッチを記述する
@translationof Writing pitches

このセクションではピッチを入力する方法について議論します。@c
音符をオクターブの中に置くには 2 つの方法があります:
絶対モードと相対モードです。@c
たいていの場合、相対モードの方が便利です。

@menu
* 絶対オクターブ入力::
* 相対オクターブ入力::
* 臨時記号::
* 他の言語での音符名::
@end menu


@node 絶対オクターブ入力
@unnumberedsubsubsec 絶対オクターブ入力
@translationof Absolute octave entry

@cindex pitch name (ピッチ名)
@cindex pitch (ピッチ)
@cindex absolute (絶対)
@cindex absolute octave specification (絶対オクターブ指定)
@cindex octave specification, absolute (絶対オクターブ指定)
@cindex absolute octave entry (絶対オクターブ入力)
@cindex octave entry, absolute (絶対オクターブ入力)

ピッチ名は @code{a} から @code{g} までの小文字を使って指定されます。@c
@code{c} から @code{b} までの音符名はミドル C の下のオクターブに譜刻されます。

@c don't use c' here.
@lilypond[verbatim,quote]
{
  \clef bass
  c4 d e f
  g4 a b c
  d4 e f g
}
@end lilypond

@cindex octave changing mark (オクターブ変更記号)

@funindex '
@funindex ,

他のオクターブはシングル クォート@tie{}(@code{'}) または@c
カンマ@tie{}(@code{,}) 文字で指定されます。@c
各@tie{}@code{'} はピッチを 1 オクターブ上げます。@c
一方、各@tie{}@code{,} はピッチを 1 オクターブ下げます。

@lilypond[verbatim,quote]
{
  \clef treble
  c'4 e' g' c''
  c'4 g b c'
  \clef bass
  c,4 e, g, c
  c,4 g,, b,, c,
}
@end lilypond

@funindex \fixed
共通して何度も用いられるオクターブ記号は、@code{\fixed} の後に基準ピッチを@c
入力し、その後の音楽を入力することで 1 度だけで済みます。
@code{\fixed} の中にあるピッチは、基準ピッチよりもオクターブ上か下にある場合@c
にのみ @code{'} か@tie{}@code{,} の記号が必要です。

@lilypond[verbatim,quote]
{
  \fixed c' {
    \clef treble
    c4 e g c'
    c4 g, b, c
  }
  \clef bass
  \fixed c, {
    c4 e g c'
    c4 g, b, c
  }
}
@end lilypond

@code{\fixed} の後に続く音楽表記内のピッチは、外側にあるいかなる
@code{\relative} の影響も受けません。次で説明します。

@morerefs
音楽用語集:
@rglos{Pitch names}

コード断片集:
@rlsrnamed{Pitches,ピッチ}


@node 相対オクターブ入力
@unnumberedsubsubsec 相対オクターブ入力
@translationof Relative octave entry

@cindex relative (相対)
@cindex relative octave entry (相対オクターブ入力)
@cindex octave entry, relative (相対オクターブ入力)
@cindex relative octave specification (相対オクターブ指定)
@cindex ocatve specification, relative (相対オクターブ指定)

@funindex \relative

絶対オクターブ入力は、一つ一つの音符のオクターブを指定する必要があります。@c
相対オクターブ入力は、対照的に、@c
すぐ前の音符との関係で各オクターブを指定します。@c
1 つの音符のオクターブを変更すると、続く音符のすべてに影響します。

相対音符モードは @code{\relative} コマンドを使って@c
明示的に入力する必要があります。

@example
\relative @var{startpitch} @var{musicexpr}
@end example

相対モードでは、各音符は可能な限り前の音符の近くに配置されます。@c
このことは、@code{@var{musicexp}} の中にある各ピッチのオクターブが@c
以下のように算出されるということを意味します:

@itemize
@item
音符に対してオクターブ変更記号が使用されていない場合、@c
その音符のオクターブは前の音符との音程が
5 度よりも小さくなるよう算出されます。@c
この音程は臨時記号を考慮せずに決定されます。

@item
オクターブ変更記号@tie{}@code{'} や @code{,} を付け加えることによって、@c
オクターブ記号無しの場合のピッチから、@c
ピッチを 1 オクターブ上げ下げすることができます。

@item
複数のオクターブ変更記号を使用することができます。@c
例えば、@code{''}@tie{}と@tie{}@code{,,} はピッチを 2 オクターブ変えます。

@item
最初の音符のピッチは @code{@var{startpitch}} と相対関係で決定されます。@c
@var{startpitch} は絶対オクターブ モードで指定されます。@c
以下のどれがわかりやすいですか？

@table @asis
@item @code{c} のオクターブ
@code{c'} でミドル C を指定することは極めて基本的なため、@c
@code{c} のオクターブは、どちらかといえば素直です。@c
あなたの音楽が @code{c'''} より高い @code{gis} で始まる場合、@c
@code{\relative c''' @{ gis' @dots{} @}} のように書くことができます。

@item 内部の最初の音符のオクターブ
@code{\relative gis''' @{ gis @dots{} @}} と書くことで、@c
内部の最初の音符の絶対ピッチを簡単に決めることができます。

@item 明示的な開始ピッチ無し
@code{\relative @{ gis''' @dots{} @}} の形式は@c
前の選択肢のコンパクト版として機能します。@c
内部の最初の音符は絶対ピッチで書かれます。@c
（これは基準ピッチとして @code{f} を選択したのと同じです。）
@end table

このドキュメントは通常、最後の選択肢を使用します。

@end itemize

ここで、実際に相対モードの例を挙げます:

@lilypond[verbatim,quote]
\relative {
  \clef bass
  c d e f
  g a b c
  d e f g
}
@end lilypond

オクターブ変更記号は 4 度よりも大きな音程に対して使用されます:

@lilypond[verbatim,quote]
\relative {
  c'' g c f,
  c' a, e'' c
}
@end lilypond

音符の連なりはオクターブ変更記号が無い場合であっても@c
大きな音程に広がる可能性があります:

@lilypond[verbatim,quote]
\relative {
  c f b e
  a d g c
}
@end lilypond

@code{\relative} ブロックがネストされている場合、@c
最も内側の @code{\relative} ブロックが、外側の @code{\relative}
とは独立した自身の参照ピッチで開始します。

@lilypond[verbatim,quote]
\relative {
  c' d e f
  \relative {
    c'' d e f
  }
}
@end lilypond

@code{\relative} は @code{\chordmode} ブロックでは効果を持ちません。

@lilypond[verbatim,quote]
\new Staff {
  \relative c''' {
    \chordmode { c1 }
  }
  \chordmode { c1 }
}
@end lilypond

@code{\relative} を @code{\chordmode} ブロックの中で使用することは@c
認められません。

@code{\transpose} ブロックの中では、@code{\relative} を記述しない限り、@c
絶対モードになります。

@lilypond[verbatim,quote]
\relative {
  d' e
  \transpose f g {
    d e
    \relative {
      d' e
    }
  }
}
@end lilypond

@cindex chord, and relative octave entry (和音と相対オクターブ入力)
@cindex relative octave entry, and chords (相対オクターブ入力と和音)

前の要素が和音である場合、@c
その和音の最初の音符が後に続く音符または和音の参照ポイントとして使用されます。@c
和音の内部では、次の音符は常に 1 つ前の音符との相対関係になります。@c
次の例を、@code{c} の音符に気を付けて、注意深く検証してください。

@lilypond[verbatim,quote]
\relative {
  c'
  <c e g>
  <c' e g'>
  <c, e, g''>
}
@end lilypond

上で説明したように、ピッチのオクターブは音符名のみを使って算出され、@c
いかなる変更 (訳注: シャープやフラット) にも影響を受けません。@c
そのため、B の後の E ダブル シャープは B よりも上に配置され、@c
B の後の F ダブル フラットは B よりも下に配置されます。@c
言い換えると、重増 4 度は重減 5 度よりも小さい
-- それぞれの音程に含まれる半音の数に関係無く -- と見なされます。

@lilypond[verbatim,quote]
\relative {
  c''2 fis
  c2 ges
  b2 eisis
  b2 feses
}
@end lilypond

状況が複雑であるときには、前の音符にかかわらず固定したピッチを指定するほうが@c
有益かもしれません。これは @code{\resetRelativeOctave} によって行うことが@c
できます。

@lilypond[verbatim,quote]
\relative {
  <<
    { c''2 d }
    \\
    { e,,2 f }
  >>
  \resetRelativeOctave c''
  c2
}
@end lilypond

@funindex \resetRelativeOctave


@morerefs
音楽用語集:
@rglos{fifth},
@rglos{interval},
@rglos{Pitch names}

記譜法リファレンス:
@ref{Octave checks}

コード断片集:
@rlsrnamed{Pitches,ピッチ}

内部リファレンス:
@rinternals{RelativeOctaveMusic}


@cindex relative octave entry, and transposition (相対オクターブ入力と移調)
@cindex transposition, and relative octave entry (移調と相対オクターブ入力)

@funindex \transpose
@funindex \chordmode
@funindex \relative


@node 臨時記号
@unnumberedsubsubsec 臨時記号
@translationof Accidentals

@cindex accidental (臨時記号)
@cindex key signature (調号)
@cindex clef (音部記号)

@c duplicated in Key signature and Accidentals
@warning{LilyPond を始めたばかりのユーザは@c
しばしば臨時記号と調号のことで混乱します。@c
LilyPond では、音符名はピッチを指定します
-- 調号と音部記号がこれらのピッチをどのように表示するかを決定します。@c
@code{c} のような変更を加えられていない音符は、調号や音部記号とは無関係に、@c
@q{C ナチュラル} を意味します。@c
更なる情報は、@rlearning{ピッチと調号} を参照してください。}

@cindex note name, Dutch (オランダ語での音符名)
@cindex note name, default (デフォルトの音符名)
@cindex default note name (デフォルトの音符名)
@cindex sharp (シャープ)
@cindex flat (フラット)
@cindex double sharp (ダブル シャープ)
@cindex sharp, double (ダブル シャープ)
@cindex double flat (ダブル フラット)
@cindex flat, double (ダブル フラット)
@cindex natural sign (ナチュラル記号)
@cindex natural pitch (ナチュラル ピッチ)

@notation{シャープ}のピッチは音符名に @code{is} を付け加えることによって@c
作られ、@notation{フラット}のピッチは @code{es} を付け加えることによって@c
作られます。@c
予想しているかもしれませんが、@notation{ダブル シャープ}や@c
@notation{ダブル フラット}は @code{isis} または @code{eses} を@c
付け加えることによって作られます。@c
この構文はオランダ語の音符命名規約から派生しました。@c
臨時記号に他の名前を使うには、@c
@ref{Note names in other languages} を参照してください。

@lilypond[verbatim,quote,fragment]
\relative c'' { ais1 aes aisis aeses }
@end lilypond

ナチュラルのピッチは単に音符名を入力します。接尾辞は必要ありません。@c
ナチュラル記号は、前の臨時記号や調号の効果をキャンセルするのに必要な場合に@c
表示されます。

@lilypond[verbatim,quote,fragment]
\relative c'' { a4 aes a2 }
@end lilypond

@cindex quarter tone (4 分音)
@cindex semi-flat (半フラット)
@cindex semi-sharp (半シャープ)

4 分音が付け加えられるかもしれません。@c
以下の一連の C は左から順にピッチが増えていっています:

@lilypond[verbatim,quote,fragment]
\relative c'' { ceseh1 ces ceh c cih cis cisih }
@end lilypond


@cindex accidental, reminder (親切の臨時記号)
@cindex accidental, cautionary (忠告の臨時記号)
@cindex accidental, parenthesized (括弧に囲まれた臨時記号)
@cindex reminder accidental (親切の臨時記号)
@cindex cautionary accidental (忠告の臨時記号)
@cindex parenthesized accidental (括弧に囲まれた臨時記号)

@funindex ?
@funindex @sortas{!A} !

通常、臨時記号は自動的に譜刻されますが、@c
手動で譜刻する場合もあるかもしれません。@c
親切の臨時記号はピッチの後にエクスクラメーション記号@tie{}@code{!} を@c
付け加えることによって譜刻することができます。@c
忠告の臨時記号 (つまり、括弧で囲まれた臨時記号) は@c
ピッチの後にクエスチョン記号@tie{}@code{?} を付け加えることによって@c
譜刻することができます。@c
これら追加の臨時記号を使ってナチュラル記号を作り出すこともできます。

@lilypond[verbatim,quote,fragment]
\relative c'' { cis cis cis! cis? c c c! c? }
@end lilypond

@cindex accidental, on tied note (タイで結ばれた音符への臨時記号)
@cindex tied note, accidental (タイで結ばれた音符への臨時記号)

タイで結ばれた音符に付ける臨時記号は@c
新しいシステム (訳者: 譜 1 行分のこと) の開始点でのみ譜刻されます:

@lilypond[verbatim,quote,fragment,ragged-right]
\relative c'' {
  cis1~ 1~
  \break
  cis
}
@end lilypond


@snippets

@cindex hiding accidentals, on tied notes at start of system (システムの先頭にあるタイで繋がれた音符の臨時記号を隠す)
@cindex accidental, hiding, on tied notes at start of system (システムの先頭にあるタイで繋がれた音符の臨時記号を隠す)
@lilypondfile[verbatim,quote,texidoc,doctitle,ragged-right]
{snippets/hiding-accidentals-on-tied-notes-at-the-start-of-a-new-system.ly}

@cindex natural sign, extra, preventing (追加のナチュラル記号を表示しないようにする)
@cindex extra natural sign, preventing (追加のナチュラル記号を表示しないようにする)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/preventing-extra-naturals-from-being-automatically-added.ly}

@morerefs
音楽用語集:
@rglos{sharp},
@rglos{flat},
@rglos{double sharp},
@rglos{double flat},
@rglos{Pitch names},
@rglos{quarter tone}

学習マニュアル:
@rlearning{ピッチと調号}

記譜法リファレンス:
@ref{Automatic accidentals},
@ref{Annotational accidentals (musica ficta)},
@ref{Note names in other languages}

コード断片集:
@rlsrnamed{Pitches,ピッチ}.

内部リファレンス:
@rinternals{Accidental_engraver},
@rinternals{Accidental},
@rinternals{AccidentalCautionary},
@rinternals{accidental-interface}

@cindex accidental, quarter-tone (4 分音臨時記号)
@cindex quarter-tone accidental (4 分音臨時記号)

@knownissues
4 分音臨時記号の表記の仕方で広く認められた標準はないため、@c
LilyPond の記号はいかなる標準にも準拠しません。


@node 他の言語での音符名
@unnumberedsubsubsec 他の言語での音符名
@translationof Note names in other languages

@cindex note name, other languages (他の言語での音符名)
@cindex pitch name, other languages (他の言語でのピッチ名)
@cindex language, note names in other (他の言語での音符名)
@cindex language, pitch names in other (他の言語でのピッチ名)

他のさまざまな言語での音符名と臨時記号名のセットが定義されています。@c
通常、音符名の言語の選択はファイルの先頭で行います。
以下の例はイタリア語の音符名を使用します:

@lilypond[quote,verbatim]
\language "italiano"

\relative {
  do' re mi sib
}
@end lilypond

利用可能な言語ファイルとそれらが定義している音符名を挙げます:

@quotation
@multitable {@w{@code{português} または}} {@code{do} @code{re}/@code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}}
@headitem 言語
  @tab 音符名
@item @code{nederlands}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{bes} @code{b}
@item @code{català} または@*@ @code{catalan}
  @tab @code{do} @code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@item @code{deutsch}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{b} @code{h}
@item @code{english}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{bf}/@code{b-flat} @code{b}
@item @code{español} または@*@ @code{espanol}
  @tab @code{do} @code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@item @code{français}
  @tab @code{do} @code{ré}/@code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@item @code{italiano}
  @tab @code{do} @code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@item @code{norsk}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{b} @code{h}
@item @code{português} または@*@ @code{portugues}
  @tab @code{do} @code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@item @code{suomi}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{b} @code{h}
@item @code{svenska}
  @tab @code{c} @code{d} @code{e} @code{f} @code{g} @code{a} @code{b} @code{h}
@item @code{vlaams}
  @tab @code{do} @code{re} @code{mi} @code{fa} @code{sol} @code{la} @code{sib} @code{si}
@end multitable
@end quotation

音符名に加えて、臨時記号の接尾辞も言語によって異なる場合があります:

@quotation
@multitable {@w{@code{português} または}} {@code{s}/@code{-sharp}} {@code{f}/@code{-flat}} {@code{ss}/@code{x}/@code{-sharpsharp}} {@code{ff}/@code{-flatflat}}
@headitem 言語
  @tab シャープ @tab フラット @tab ダブル シャープ @tab ダブル フラット
@item @code{nederlands}
  @tab @code{is} @tab @code{es} @tab @code{isis} @tab @code{eses}
@item @code{català} または@*@ @code{catalan}
  @tab @code{d}/@code{s} @tab @code{b} @tab @code{dd}/@code{ss}
    @tab @code{bb}
@item @code{deutsch}
  @tab @code{is} @tab @code{es} @tab @code{isis} @tab @code{eses}
@item @code{english}
  @tab @code{s}/@code{-sharp} @tab @code{f}/@code{-flat}
    @tab @code{ss}/@code{x}/@code{-sharpsharp}
    @tab @code{ff}/@code{-flatflat}
@item @code{español} または@*@ @code{espanol}
  @tab @code{s} @tab @code{b} @tab @code{ss}/@code{x} @tab @code{bb}
@item @code{français}
  @tab @code{d} @tab @code{b} @tab @code{dd}/@code{x} @tab @code{bb}
@item @code{italiano}
  @tab @code{d} @tab @code{b} @tab @code{dd} @tab @code{bb}
@item @code{norsk}
  @tab @code{iss}/@code{is} @tab @code{ess}/@code{es}
    @tab @code{ississ}/@code{isis} @tab @code{essess}/@code{eses}
@item @code{português} または@*@ @code{portugues}
  @tab @code{s} @tab @code{b} @tab @code{ss} @tab @code{bb}
@item @code{suomi}
  @tab @code{is} @tab @code{es} @tab @code{isis} @tab @code{eses}
@item @code{svenska}
  @tab @code{iss} @tab @code{ess} @tab @code{ississ} @tab @code{essess}
@item @code{vlaams}
  @tab @code{k} @tab @code{b} @tab @code{kk} @tab @code{bb}
@end multitable
@end quotation

オランダ語、ドイツ語、ノルウェー語、フィンランド語では、@c
@code{aes} は縮めて @code{as} となりますが、@c
オランダ語とノルウェー語については、LilyPond ではどちらの形式も認められます。@c
これは @code{es} と @code{ees}、@code{aeses} と @code{ases}、@c
@code{eeses} と @code{eses} でも同様です。@c

ドイツ語とフィンランド語については、LilyPond は
@code{ases} よりよく使われる形である
@code{asas} が使用できます。

@lilypond[verbatim,quote,fragment]
\relative c'' { a2 as e es a ases e eses }
@end lilypond


@cindex microtone (微分音)
@cindex semi-sharp (半シャープ)
@cindex semi-flat (半フラット)
@cindex sesqui-sharp (1.5 シャープ)
@cindex sesqui-flat (1.5 フラット)

音楽の中には @q{通常の} シャープやフラットの音の変化をさらに細かく分けた@c
微分音を使用するものがあります。四分音
(訳者: シャープやフラットの半分の音の変化。4 分音符ではありません)
の接尾辞を以下の表で挙げます。@c
接頭辞 @notation{半-} と @notation{1.5-} はそれぞれ
@q{半分} と @q{1 つ半} を意味します。

@quotation
@multitable {@w{@code{português} または}} {@b{semi-diesis}} {@b{semi-bemolle}} {@b{sesqui-diesis}} {@b{sesqui-bemolle}}
@headitem 元号
  @tab 半-シャープ @tab 半-フラット @tab 1.5-シャープ @tab 1.5-フラット
@item @code{nederlands}
  @tab @code{ih} @tab @code{eh} @tab @code{isih} @tab @code{eseh}
@item @code{català} または@*@ @code{catalan}
  @tab @code{qd}/@code{qs} @tab @code{qb} @tab @code{tqd}/@code{tqs}
   @tab @code{tqb}
@item @code{deutsch}
  @tab @code{ih} @tab @code{eh} @tab @code{isih} @tab @code{eseh}
@item @code{english}
  @tab @code{qs} @tab @code{qf} @tab @code{tqs} @tab @code{tqf}
@item @code{español} または@*@ @code{espanol}
  @tab @code{cs} @tab @code{cb} @tab @code{tcs} @tab @code{tcb}
@item @code{français}
  @tab @code{sd} @tab @code{sb} @tab @code{dsd} @tab @code{bsb}
@item @code{italiano}
  @tab @code{sd} @tab @code{sb} @tab @code{dsd} @tab @code{bsb}
@item @code{norsk}
  @tab @code{ih} @tab @code{eh} @tab @code{issih}/@code{isih}
   @tab @code{esseh}/@code{eseh}
@item @code{português} または@*@ @code{portugues}
  @tab @code{sqt} @tab @code{bqt} @tab @code{stqt} @tab @code{btqt}
@item @code{suomi}
  @tab @code{ih} @tab @code{eh} @tab @code{isih} @tab @code{eseh}
@item @code{svenska}
  @tab @code{ih} @tab @code{eh} @tab @code{issih} @tab @code{esseh}
@item @code{vlaams}
  @tab @code{hk} @tab @code{hb} @tab @code{khk} @tab @code{bhb}
@end multitable
@end quotation

ドイツ語では、微分音に対して、上記の通常の表記の他に、@c
似た形の短縮形を使用することもできます。

@lilypond[verbatim,quote,fragment]
\language "deutsch"

\relative c'' { asah2 eh aih eisih }
@end lilypond

ここに示されている大半の言語は西洋クラシック音楽
-- @notation{Common Practice Period}: 西暦1600年から1900年頃の@c
バロック音楽、クラシック音楽、ロマン派音楽とも言えます --
に関係があります。@c
しかしながら、他のピッチやチューニング方法もサポートされています:
@ref{Common notation for non-Western music} を参照してください。

@morerefs
音楽用語集:
@rglos{Pitch names},
@rglos{Common Practice Period}.

記譜法リファレンス:
@ref{Common notation for non-Western music}

あらかじめイストールされているファイル:
@file{scm/define-note-names.scm}

コード断片集:
@rlsrnamed{Pitches,ピッチ}


@node 複数のピッチを変更する
@subsection 複数のピッチを変更する
@translationof Changing multiple pitches

このセクションではピッチを変更する方法について議論します。

@menu
* オクターブ チェック::
* 移調::
* 反転::
* 逆行::
* 様式的な変形::
@end menu


@node オクターブ チェック
@unnumberedsubsubsec オクターブ チェック
@translationof Octave checks

@cindex octave correction (オクターブ修正)
@cindex octave check (オクターブ チェック)
@cindex control pitch (ピッチの制御)

@funindex @sortas{=A} =
@funindex \octaveCheck
@funindex controlpitch

相対モードでは、オクターブ変更記号を付け忘れることが容易に起こり得ます。@c
オクターブ チェックは、予期しないオクターブの音符を見つけた場合に@c
警告を表示してオクターブを修正することによって、@c
そのようなエラーを見つけ出すことをより容易にします。

音符のオクターブをチェックするには、@c
@code{=}@tie{}の後に絶対オクターブを指定します。@c
以下の例は、2 番目の音符の絶対オクターブがオクターブ チェックによって@c
示される @code{d'} ではなく @code{d''} であるため、@c
警告を発し (そしてピッチを変更し) ます。

@lilypond[verbatim,quote]
\relative {
  c''2 d='4 d
  e2 f
}
@end lilypond

音符のオクターブは
@code{\octaveCheck@tie{}@var{controlpitch}} コマンドでも@c
チェックすることができます。@c
@code{@var{controlpitch}} は絶対モードで指定されます。@c
これは前の音符と @code{@var{controlpitch}} との間の音程が
4 度以内であるかどうかをチェックします
(つまり、通常の相対モードでの算出方法と同じです)。@c
このチェックが失敗した場合、警告が表示されます。@c
このチェックの前にある音符は変更されませんが、@c
その後に続く音符はオクターブが修正されます。

@lilypond[verbatim,quote]
\relative {
  c''2 d
  \octaveCheck c'
  e2 f
}
@end lilypond

以下の 2 小節を見てください。@c
1 番目と 3 番目の @code{\octaveCheck} は失敗していますが、@c
2 番目のチェックは失敗していません。

@lilypond[verbatim,quote]
\relative {
  c''4 f g f

  c4
  \octaveCheck c'
  f
  \octaveCheck c'
  g
  \octaveCheck c'
  f
}
@end lilypond

@morerefs
コード断片集:
@rlsrnamed{Pitches,ピッチ}

内部リファレンス:
@rinternals{RelativeOctaveCheck}.


@node 移調
@unnumberedsubsubsec 移調
@translationof Transpose

@cindex transpose (移調)
@cindex transposing (移調)
@cindex transposition (移調)
@cindex transposition, of pitches (ピッチの移調)
@cindex transposition, of notes (音符の移調)
@cindex pitch, transposition of (ピッチの移調)
@cindex note, transposition of (音符の移調)

@funindex \transpose

音楽表記は @code{\transpose} で移調させることができます。@c
構文は以下の通りです:

@example
\transpose @var{frompitch} @var{topitch} @var{musicexpr}
@end example

@noindent
これは @code{@var{musicexpr}} が @code{@var{frompitch}} から
@code{@var{topitch}} に移調されるということを意味します:
@code{@var{frompitch}} のピッチの音符はすべて @code{@var{topitch}}
に変更され、@c
他の音符もすべて同じ音程で移調されます。@c
@code{@var{frompitch}} と @code{@var{topitch}} のピッチはどちらも@c
絶対モードで指定されます。

@warning{@code{@bs{}transpose} ブロックの中にある音符は、@c
そのブロックの中に @code{@bs{}relative} が無い限り、絶対モードになります。}

D-メジャーの調で書かれた楽曲を思い浮かべてください。@c
この楽曲を E-メジャーに移調することができます。@c
調号も自動的に移調されることに注意してください。

@lilypond[verbatim,quote]
\transpose d e {
  \relative {
    \key d \major
    d'4 fis a d
  }
}
@end lilypond

@cindex transposing instrument (移調楽器)
@cindex instrument, transposing (移調楽器)

C (通常の @notation{コンサート ピッチ}) で書かれたパートを
A のクラリネットで演奏する
(そのため、A は C として表記され、演奏は表記されたものよりも 3 度低くなります)
場合、そのパート譜は以下のように作り出されます:

@lilypond[verbatim,quote]
\transpose a c' {
  \relative {
    \key c \major
    c'4 d e g
  }
}
@end lilypond

@noindent
@w{@code{\key c \major}} を明示的に指定しているということに@c
注意してください。@c
調号を指定しなかった場合、音符は移調されますが、調号は譜刻されません。

@code{\transpose} は同音異名のピッチを区別します:
@w{@code{\transpose c cis}} と @w{@code{\transpose c des}} は@c
どちらも半音上に移調します。@c
1 番目の移調はシャープを譜刻し、音符の五線譜上での位置は変わりません。@c
2 番目の移調はフラットを譜刻し、音符の五線譜上での位置は上に上がります。

@lilypond[verbatim,quote]
music = \relative { c' d e f }
\new Staff {
  \transpose c cis { \music }
  \transpose c des { \music }
}
@end lilypond

@code{\transpose} は上記とは異なる方法で用いることもでき、@c
それによって移調楽器のために書かれた音符を入力することができます。@c
前の例では C (またはコンサート ピッチ) でピッチを入力して、@c
それらを移調楽器のために譜刻する方法を示しましたが、@c
それとは正反対のことも可能です
-- 例えば、移調楽器のパート譜から指揮譜を譜刻することです。@c
例えば、E で始まる B-フラットのトランペットの音楽
(コンサート ピッチでは D で始まる音楽) を入力している場合に、@c
指揮譜を作り出すには以下のように記述します:

@example
musicInBflat = @{ e4 @dots{} @}
\transpose c bes, \musicInBflat
@end example

@noindent
この音楽を F で譜刻する (例えば、フレンチ ホルンの楽譜にアレンジし直すために)
には、既存の音楽をもう 1 つの @code{\transpose} で包み込みます:

@example
musicInBflat = @{ e4 @dots{} @}
\transpose f c' @{ \transpose c bes, \musicInBflat @}
@end example

@noindent
移調楽器についての更なる情報は、@c
@ref{Instrument transpositions} を参照してください。


@snippets

@cindex transposition, pitches, @q{smart} (ピッチの@q{スマート} トランスポーズ)
@cindex pitches, @q{smart} transposition (ピッチの@q{スマート} トランスポーズ)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/transposing-pitches-with-minimum-accidentals-smart-transpose.ly}

@morerefs
記譜法リファレンス:
@ref{Instrument transpositions},
@ref{Inversion},
@ref{Modal transformations},
@ref{Relative octave entry},
@ref{Retrograde}

コード断片集:
@rlsrnamed{Pitches,ピッチ}

内部リファレンス:
@rinternals{TransposedMusic}

@funindex \transpose
@funindex \chordmode
@funindex \relative

@knownissues
相対変換コマンドはその引数の中にある @code{\transpose}, @code{\chordmode},
あるいは @code{\relative} セクションには影響を及ぼしません。@c
移調された音楽の中で相対モードを使用するには、@c
@code{\transpose} の中に @code{\relative} を置く必要があります。

@code{\transpose} を使用している場合、3 重の臨時記号は表示されません。@c
代わりに @q{異名等価の} ピッチが表示されます
(例えば e の 3 重フラットの代わりに d フラットが表示されます)。


@node 反転
@unnumberedsubsubsec 反転
@translationof Inversion

@cindex inversion (反転)
@cindex operation, inversion (反転操作)
@funindex \inversion

単一の操作で音楽表記を反転して、移調することができます:

@example
\inversion @var{around-pitch} @var{to-pitch} @var{musicexpr}
@end example

The @code{@var{musicexpr}} の音程は @code{@var{around-pitch}} を中心に@c
反転され、さらに @code{@var{around-pitch}} が @code{@var{to-pitch}} に@c
マッピングされるように移調されます。

@lilypond[verbatim,quote]
music = \relative { c' d e f }
\new Staff {
  \music
  \inversion d' d' \music
  \inversion d' ees' \music
}
@end lilypond

@warning{反転されるモチーフは絶対オクターブ形式で記述するか、@c
最初に絶対オクターブ形式に変換されるよう @code{@bs{}relative} ブロックで囲む@c
必要があります。}

@morerefs
記譜法リファレンス:
@ref{Modal transformations},
@ref{Retrograde},
@ref{Transpose}


@node 逆行
@unnumberedsubsubsec 逆行
@translationof Retrograde

@cindex retrograde transformation (逆行変換)
@cindex transformation, retrograde (逆行変換)
@cindex operation, retrograde (逆行操作)
@funindex \retrograde

音楽表記を後ろから前に演奏する逆行を作り出すことができます:

@lilypond[verbatim,quote]
music = \relative { c'8. ees16( fis8. a16 b8.) gis16 f8. d16 }

\new Staff {
  \music
  \retrograde \music
}
@end lilypond

@knownissues
@code{\retrograde} は非常に単純なツールです。多くのイベントは交換ではなく@c
@q{反転}するため、スパナの開始点にある調整や方向指示子は対応する終了点にも@c
追加する必要があります。つまり、@code{^(} は @code{^)} によって終了しなければ@c
ならないということです。全ての @code{\<} や @code{\cresc} は @code{\!} か
@code{\endcr} で終わらなければならず、全ての @code{\>} や @code{\decr} は@c
@code{\enddecr} で終わらなければなりません。効果が永続するような@c
プロパティ変更のコマンドやオーバライドは予期しない結果を生み出すかもしれません。

@morerefs
記譜法リファレンス:
@ref{Inversion},
@ref{Modal transformations},
@ref{Transpose}


@node 様式的な変形
@unnumberedsubsubsec 様式的な変形
@translationof Modal transformations

@cindex modal transformation (様式的な変形)
@cindex transformation, modal (様式的な変形)
@cindex operation, modal (様式的な操作)

音階に基づく作曲では、モチーフはさまざまなやり方で頻繁に移調されます。@c
これは、モチーフの開始の音程を変えるために @notation{移調} する場合や、@c
旋回点で @notation{反転} する場合があります。
@notation{逆行} するために後戻りする場合もあります@c
-- @ref{Retrograde} を参照してください。

@warning{与えられた音階の中に無い音符は、移調されません。}

@subsubsubheading 様式的な移調

@cindex modal transposition (様式的な移調)
@cindex transposition, modal (様式的な移調)
@cindex operation, transposition (移調操作)
@funindex \modalTranspose

以下により、与えられた音階でモチーフを移調させることができます:

@example
\modalTranspose @var{from-pitch} @var{to-pitch} @var{scale} @var{motif}
@end example

@var{motif} の音符は @var{scale} 内を @var{to-pitch} と @var{from-pitch}
間の音程の度数の分だけシフトされます:

@lilypond[verbatim,quote]
diatonicScale = \relative { c' d e f g a b }
motif = \relative { c'8 d e f g a b c }

\new Staff {
  \motif
  \modalTranspose c f \diatonicScale \motif
  \modalTranspose c b, \diatonicScale \motif
}
@end lilypond

上昇する音階の長さは任意であり、指定する音程も任意です:

@lilypond[verbatim,quote]
pentatonicScale = \relative { ges aes bes des ees }
motif = \relative { ees'8 des ges,4 <ges' bes,> <ges bes,> }

\new Staff {
  \motif
  \modalTranspose ges ees' \pentatonicScale \motif
}
@end lilypond

半音階の音階を持つ @code{\modalTranspose} を使った時の効果は
@code{\transpose} と同じですが、使われる音符の名前を特定することが
できます:

@lilypond[verbatim,quote]
chromaticScale = \relative { c' cis d dis e f fis g gis a ais b }
motif = \relative { c'8 d e f g a b c }

\new Staff {
  \motif
  \transpose c f \motif
  \modalTranspose c f \chromaticScale \motif
}
@end lilypond

@subsubsubheading 様式的な反転

@cindex modal inversion (様式的な反転)
@cindex inversion, modal (様式的な反転)
@cindex operation, modal inversion (様式的な反転操作)
@funindex \modalInversion

モチーフを与えられた音階に従って与えられた旋回点 (音符) で反転させて、
移調させることを 1 つの操作でできます:

@example
\modalInversion @var{around-pitch} @var{to-pitch} @var{scale} @var{motif}
@end example

@var{motif} の音符は @var{scale} 内を @var{around-pitch} から元の音符までと@c
同じ度数の分だけ逆向きに進んだ位置に配置され、それからその結果は
@var{scale} 内を @var{to-pitch} と @var{around-pitch} 間の音程の度数分だけ@c
シフトされます。

そのため、単純に音階をある音符で反転させる場合は、@var{around-pitch} と
@var{to-pitch} で同じ値を使用します:

@lilypond[verbatim,quote]
octatonicScale = \relative { ees' f fis gis a b c d }
motif = \relative { c'8. ees16 fis8. a16 b8. gis16 f8. d16 }

\new Staff {
  \motif
  \modalInversion fis' fis' \octatonicScale \motif
}
@end lilypond

音階の中にある 2 つの音符の中間にある旋回点で反転させるには、@c
2 つの音符の 1 つを旋回点として反転させて、音階の 1 度数分だけ移調させます。@c
指定された 2 つの音符が旋回点を囲んでいると解釈することができます:

@lilypond[verbatim,quote]
scale = \relative { c' g' }
motive = \relative { c' c g' c, }

\new Staff {
  \motive
  \modalInversion c' g' \scale \motive
}
@end lilypond

反転と逆行の操作を組み合わせると逆行-反転になります:

@lilypond[verbatim,quote]
octatonicScale = \relative { ees' f fis gis a b c d }
motif = \relative { c'8. ees16 fis8. a16 b8. gis16 f8. d16 }

\new Staff {
  \motif
  \retrograde \modalInversion c' c' \octatonicScale \motif
}
@end lilypond

@morerefs
記譜法リファレンス:
@ref{Inversion},
@ref{Retrograde},
@ref{Transpose}


@node ピッチを表示する
@subsection ピッチを表示する
@translationof Displaying pitches

このセクションではピッチの出力を変更する方法について議論します。

@menu
* 音部記号::
* 調号::
* オッターバ囲み::
* 楽器の移調::
* 自動臨時記号::
* 音域::
@end menu


@node 音部記号
@unnumberedsubsubsec 音部記号
@translationof Clef

@cindex G clef (G 音部記号)
@cindex C clef (C 音部記号)
@cindex F clef (F 音部記号)
@cindex treble clef (ト音記号、高音部記号)
@cindex violin clef (バイオリン音部記号)
@cindex alto clef (アルト音部記号)
@cindex tenor clef (テノール音部記号)
@cindex bass clef (ヘ音記号、バス音部記号)
@cindex French clef (フレンチ (バイオリン) 音部記号)
@cindex soprano clef (ソプラノ音部記号)
@cindex mezzosoprano clef (メゾソプラノ音部記号)
@cindex baritone clef (バリトン音部記号)
@cindex varbaritone clef (変形バリトン音部記号)
@cindex subbass clef (低バス音部記号)
@cindex clef (音部記号)
@cindex ancient clef (古代音部記号)
@cindex clef, ancient (古代音部記号)
@cindex clef, G (G 音部記号)
@cindex clef, C (C 音部記号)
@cindex clef, F (F 音部記号)
@cindex clef, treble (高音部記号)
@cindex clef, violin (バイオリン音部記号)
@cindex clef, alto (アルト音部記号)
@cindex clef, tenor (テノール音部記号)
@cindex clef, bass (ヘ音記号、バス音部記号)
@cindex clef, french (フレンチ (バイオリン) 音部記号)
@cindex clef, soprano (ソプラノ音部記号)
@cindex clef, mezzosoprano (メゾソプラノ音部記号)
@cindex clef, baritone (バリトン音部記号)
@cindex clef, varbaritone (変形バリトン音部記号)
@cindex clef, subbass (低バス音部記号)

@funindex \clef

コマンドを明示しない場合、LilyPond のデフォルトの音部記号は高音部記号
(ト音記号) です。

@lilypond[verbatim,quote,fragment,ragged-right]
c'2 c'
@end lilypond

しかし、音部記号は @code{\clef} コマンドと@c
適切な音部記号の名前を用いることで変えることができます。@c
以下のそれぞれの例の中にある音符はすべて@emph{ミドル C} です。@c

@lilypond[verbatim,quote,fragment]
\clef treble
c'2 c'
\clef alto
c'2 c'
\clef tenor
c'2 c'
\clef bass
c'2 c'
@end lilypond

指定することのできる全ての音部記号の名前は @ref{Clef styles} にあります。

専門的な音部記号 -- 例えば@emph{古代の}音楽に用いられるもの --　は
@ref{Mensural clefs} や @ref{Gregorian clefs} に説明してあります。@c
タブ譜の音部記号が必要な音楽に関しては、
@ref{Default tablatures} や @ref{Custom tablatures} に説明があります。

@cindex cue clef (合図音符の音部記号)
@cindex clef, with cue notes (合図音符の音部記号)
合図音符を用いる際の音部記号については、@ref{Formatting cue notes} の
@code{\cueClef} や @code{\cueDuringWithClef} コマンドを参照してください。

@cindex transposing clefs (音部を移調する)
@cindex clef, transposing (音部を移調する)
@cindex octave transposition (オクターブ移調)
@cindex optional octave transposition (任意のオクターブ移調)
@cindex octave transposition, optional (任意のオクターブ移調)
@cindex choral tenor clef (合唱譜のテナー音部記号)
@cindex tenor clef, choral (合唱譜のテナー音部記号)

音部名に @code{_8} または @code{^8} を付け加えることによって、@c
音部はそれぞれ 1 オクターブ下/上に移調され、@c
@code{_15} または @code{^15} によって 2 オクターブ移調されます。@c
音部名にアルファベット以外の文字が含まれる場合、@c
音部名をダブル クォートで囲む必要があります。

@lilypond[verbatim,quote,fragment]
\clef treble
c'2 c'
\clef "treble_8"
c'2 c'
\clef "bass^15"
c'2 c'
\clef "alto_2"
c'2 c'
\clef "G_8"
c'2 c'
\clef "F^5"
c'2 c'
@end lilypond

数字の引数を括弧や角括弧で囲むことで、オプションのオクターブを@c
表示させることができます:

@lilypond[verbatim,quote,fragment]
\clef "treble_(8)"
c'2 c'
\clef "bass^[15]"
c'2 c'
@end lilypond

ピッチは数字の引数が括弧で囲まれていない場合と同じです。

デフォルトでは、改行のタイミングで音部記号の変更が行われる時には、@c
次の行の音部記号の他に、前の行の最後に@emph{予告の}音部記号が表示されます。@c
この@emph{予告の}音部記号は表示しないようにすることができます。

@lilypond[verbatim,quote,fragment]
\clef treble { c'2 c' } \break
\clef bass { c'2 c' } \break
\clef alto
  \set Staff.explicitClefVisibility = #end-of-line-invisible
  { c'2 c' } \break
  \unset Staff.explicitClefVisibility
\clef bass { c'2 c' } \break
@end lilypond

デフォルトでは、以前に表示された音部記号と同じ音部記号を @code{\clef}
コマンドで指定しても、再表示はされず無視されます。この挙動は
@code{\set Staff.forceClef = ##t} で変更することができます。

@lilypond[verbatim,quote,fragment]
  \clef treble
  c'1
  \clef treble
  c'1
  \set Staff.forceClef = ##t
  c'1
  \clef treble
  c'1
@end lilypond

@noindent
さらに正確に言うと、音部記号を表示するのは @code{\clef} コマンドそのものでは@c
ありません。代わりに、このコマンドは @code{Clef_engraver} のプロパティを@c
変更し、@code{Clef_engraver} はそれによって現在の譜に音部記号を表示するか@c
どうかを決定します。@code{forceClef} プロパティはこの音部記号を表示するかの@c
決定をその場で上書きします。

手動で音部記号が変更された場合、変更後の音部記号は通常より小さく表示されます。@c
この挙動を変更することができます。

@lilypond[verbatim,quote,fragment]
  \clef "treble"
  c'1
  \clef "bass"
  c'1
  \clef "treble"
  c'1
  \override Staff.Clef.full-size-change = ##t
  \clef "bass"
  c'1
  \clef "treble"
  c'1
  \revert Staff.Clef.full-size-change
  \clef "bass"
  c'1
  \clef "treble"
  c'1
@end lilypond

@snippets

@cindex clef, tweaking properties (音部記号のプロパティを変更する)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/tweaking-clef-properties.ly}

@morerefs
記譜法リファレンス:
@ref{Mensural clefs},
@ref{Gregorian clefs},
@ref{Default tablatures},
@ref{Custom tablatures},
@ref{Formatting cue notes}

インストールされているファイル:
@file{scm/parser-clef.scm}

コード断片集:
@rlsrnamed{Pitches,ピッチ}

内部リファレンス:
@rinternals{Clef_engraver},
@rinternals{Clef},
@rinternals{ClefModifier},
@rinternals{clef-interface}

@knownissues
音部記号に付けるオクターブ移動の数字は、個別のグラフィカル オブジェクト@c
として扱われます。@c
このため、@var{Clef} に適用される @code{\override} は、@c
別の @code{\override} で @var{ClefModifier} グラフィカル オブジェクトに@c
適用する必要があります。

@lilypond[fragment,quote,verbatim]
\new Staff \with {
  \override Clef.color = #blue
  \override ClefModifier.color = #red
}

\clef "treble_8" c'4
@end lilypond


@node 調号
@unnumberedsubsubsec 調号
@translationof Key signature

@cindex key signature (調号)

@funindex \key

@c duplicated in Key signature and Accidentals
@warning{LilyPond を始めたばかりのユーザは@c
しばしば臨時記号と調号のことで混乱します。@c
LilyPond では、音符名は未加工の入力です。@c
調号と音部記号がこの未加工の入力をどのように表示するかを決定します。@c
@code{c} のような変更を加えられていない音符は、調号や音部記号とは無関係に、@c
@q{C ナチュラル} を意味します。@c
更なる情報は、@rlearning{ピッチと調号} を参照してください。}

調号は楽曲を演奏すべき調性を示します。@c
調号は譜の先頭で変更記号 (フラットやシャープ) のセットによって示されます。@c
調号は変更されることがあります:

@example
\key @var{pitch} @var{mode}
@end example

@funindex \major
@funindex \minor
@funindex \ionian
@funindex \locrian
@funindex \aeolian
@funindex \mixolydian
@funindex \lydian
@funindex \phrygian
@funindex \dorian

@cindex church mode (チャーチ モード)
@cindex mode (モード)
@cindex major (メジャー)
@cindex minor (マイナー)
@cindex ionian (アイオニアン)
@cindex locrian (ロクリアン)
@cindex aeolian (エオリアン)
@cindex mixolydian (ミクソリディアン)
@cindex lydian (リディアン)
@cindex phrygian (フリジアン)
@cindex dorian (ドリアン)

@noindent

調号を @code{@var{pitch}}-メジャーや @code{@var{pitch}}-マイナーにするには、@c
@code{@var{mode}} をそれぞれ @code{\major} または @code{\minor} にします。@c
さらに標準のモード名
 -- @notation{チャーチ モード} とも呼ばれます --
を使うこともできます:
@code{\ionian}, @code{\dorian}, @code{\phrygian}, @code{\lydian},
@code{\mixolydian}, @code{\aeolian} それに @code{\locrian} です。

@lilypond[verbatim,quote,fragment]
\relative {
  \key g \major
  fis''1
  f
  fis
}
@end lilypond

新たにモードを定義することができます
-- モードが C で始まる場合、C で始まる音階の各ステップに対する@c
変更記号をリスト アップします。

@lilypond[verbatim,quote]
freygish = #`((0 . ,NATURAL) (1 . ,FLAT) (2 . ,NATURAL)
    (3 . ,NATURAL) (4 . ,NATURAL) (5 . ,FLAT) (6 . ,FLAT))

\relative {
  \key c \freygish c'4 des e f
  \bar "||" \key d \freygish d es fis g
}
@end lilypond

@code{KeySignature} のプロパティ @code{flat-positions} と
@code{sharp-positions} を用いて、調号の臨時記号を通常とは異なる@c
オクターブに表示させたり、複数のオクターブに表示させることができます。@c
これらのプロパティに渡される値は、臨時記号を表示させる譜ポジションの@c
範囲を指定します。@c
1 つの値だけを渡した場合、その譜ポジションで終了するオクターブの範囲@c
に臨時記号が配置されます。

@lilypond[verbatim, quote,fragment]
\override Staff.KeySignature.flat-positions = #'((-5 . 5))
\override Staff.KeyCancellation.flat-positions = #'((-5 . 5))
\clef bass \key es \major es g bes d'
\clef treble \bar "||" \key es \major es' g' bes' d''

\override Staff.KeySignature.sharp-positions = #'(2)
\bar "||" \key b \major b' fis' b'2
@end lilypond

@snippets

@cindex key signature, preventing natural signs (調号のナチュラル記号を表示しない)
@cindex natural sign, preventing in key signatures (調号のナチュラル記号を表示しない)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/preventing-natural-signs-from-being-printed-when-the-key-signature-changes.ly}

@cindex key signature, non-traditional (非伝統的な調号)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/non-traditional-key-signatures.ly}

@morerefs
音楽用語集:
@rglos{church mode},
@rglos{scordatura}

学習マニュアル:
@rlearning{ピッチと調号}

コード断片集:
@rlsrnamed{Pitches,ピッチ}

内部リファレンス:
@rinternals{KeyChangeEvent},
@rinternals{Key_engraver},
@rinternals{Key_performer},
@rinternals{KeyCancellation},
@rinternals{KeySignature},
@rinternals{key-signature-interface}


@node オッターバ囲み
@unnumberedsubsubsec オッターバ囲み
@translationof Ottava brackets

@cindex ottava (オッターバ)
@cindex 15ma
@cindex 15mb
@cindex 8va
@cindex 8vb
@cindex octavation (オクタベーション)

@funindex set-octavation
@funindex \ottava

@notation{オッターバ囲み} は譜をオクターブ単位で移調します:

@lilypond[verbatim,quote]
\relative a' {
  a2 b
  \ottava #-2
  a2 b
  \ottava #-1
  a2 b
  \ottava #0
  a2 b
  \ottava #1
  a2 b
  \ottava #2
  a2 b
}
@end lilypond

@snippets

@cindex ottava text (オッターバのテキスト)
@cindex text, ottavation (オッターバのテキスト)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/changing-ottava-text.ly}

@cindex ottava, for single voice (単一声部に対するオッターバ)
@cindex voice, with ottavation (単一声部に対するオッターバ)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/adding-an-ottava-marking-to-a-single-voice.ly}

@cindex ottava spanner, modify slope (オッターバのスパナの傾きを変更する)
@cindex slope, ottava spanner, modification (オッターバのスパナの傾きを変更する)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/modifying-the-ottava-spanner-slope.ly}


@morerefs
音楽用語集:
@rglos{octavation}

コード断片集:
@rlsrnamed{Pitches,ピッチ}

内部リファレンス:
@rinternals{Ottava_spanner_engraver},
@rinternals{OttavaBracket},
@rinternals{ottava-bracket-interface}


@node 楽器の移調
@unnumberedsubsubsec 楽器の移調
@translationof Instrument transpositions

@cindex transposition, MIDI (MIDI の移調)
@cindex transposition, instrument (楽器の移調)
@cindex transposing instrument (移調楽器)
@cindex MIDI
@cindex MIDI, transposition (MIDI の移調)

@funindex \transposition

楽器の移調を含む楽器を譜刻するとき、いくつかのパートは@c
@notation{コンサート ピッチ} とは異なるピッチで譜刻される可能性があります。@c
このような場合、@notation{移調楽器} の調を指定すべきです。@c
指定しなければ MIDI 出力や他のパートの出だしのピッチは誤ったものになります。@c
引用についての更なる情報は @ref{Quoting other voices} を参照してください。

@example
\transposition @var{pitch}
@end example

@code{\transposition} で使用するピッチは、@c
譜に書かれた @code{c'} をその移調楽器で演奏したときに聴こえる@c
実際の音に対応したものであるべきです。@c
このピッチは絶対モードで入力します。@c
ですから、楽譜よりも 1 度高い音を出す楽器は
@w{@code{\transposition d'}} を使うべきです。@c
@code{\transposition} は、ピッチがコンサート ピッチでは @emph{ない} ピッチで@c
入力されている場合に @emph{のみ} 使用すべきです。

バイオリンと B-フラットのクラリネットのための音符をいくつか挙げます。@c
それぞれのパートは、それぞれが指揮譜に刻譜されるときに使用される@c
音符と調を使って入力されています。@c
2 つの楽器は斉奏で演奏しています。

@lilypond[verbatim,quote]
\new GrandStaff <<
  \new Staff = "violin" \with {
    instrumentName = "Vln"
    midiInstrument = "violin"
  }
  \relative c'' {
    % not strictly necessary, but a good reminder
    \transposition c'
    \key c \major
    g4( c8) r c r c4
  }
  \new Staff = "clarinet" \with {
    instrumentName = \markup { Cl (B\flat) }
    midiInstrument = "clarinet"
  }
  \relative c'' {
    \transposition bes
    \key d \major
    a4( d8) r d r d4
  }
>>
@end lilypond

@code{\transposition} は楽曲の途中で変更されることもあります。@c
例えば、クラリネット奏者は A のクラリネットから B-フラットのクラリネットに@c
持ち替えなければならないことがあります。

@lilypond[verbatim,quote]
flute = \relative c'' {
  \key f \major
  \cueDuring "clarinet" #DOWN {
    R1 _\markup\tiny "clarinet"
    c4 f e d
    R1 _\markup\tiny "clarinet"
  }
}
clarinet = \relative c'' {
  \key aes \major
  \transposition a
  aes4 bes c des
  R1^\markup { muta in B\flat }
  \key g \major
  \transposition bes
  d2 g,
}
\addQuote "clarinet" \clarinet
<<
  \new Staff \with { instrumentName = "Flute" }
    \flute
  \new Staff \with { instrumentName = "Cl (A)" }
    \clarinet
>>
@end lilypond

@morerefs
音楽用語集:
@rglos{concert pitch},
@rglos{transposing instrument}

記譜法リファレンス:
@ref{Quoting other voices},
@ref{Transpose}

コード断片集:
@rlsrnamed{Pitches,ピッチ}


@node 自動臨時記号
@unnumberedsubsubsec 自動臨時記号
@translationof Automatic accidentals

@cindex accidental style (臨時記号スタイル)
@cindex accidental style, default (デフォルトの臨時記号スタイル)
@cindex accidental (臨時記号)
@cindex accidental, automatic (自動臨時記号)
@cindex automatic accidental (自動臨時記号)
@cindex default accidental style (デフォルトの臨時記号スタイル)

@funindex \accidentalStyle
@funindex voice
@funindex @sortas{defaultA} default

臨時記号の譜刻の仕方には多くの異なる規約があります。@c
LilyPond はどの臨時記号スタイルを使用するのかを指定するための関数を@c
提供します。@c
この関数は以下のように呼び出されます:

@example
\new Staff <<
  \accidentalStyle voice
  @{ @dots{} @}
>>
@end example

指定された臨時記号スタイルは、デフォルトでは、カレントの @code{Staff} に@c
適用されます
(スタイル @code{piano} と @code{piano-cautionary} は例外です。@c
これらは以下で説明します)。@c
オプションとして、この関数は 2 つ目の引数をとることができ、@c
それによってスタイルを変更すべき範囲 (スコープ) を指定できます。@c
例えば、カレントの @code{StaffGroup} のすべての譜で同じスタイルを使うには、@c
以下のようにします:

@example
\accidentalStyle StaffGroup.voice
@end example

サポートされる臨時記号スタイルを以下で示します。@c
それぞれのスタイルを実際に示すために、以下の例を使用します:

@lilypond[verbatim,quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle default
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle default
      \musicB
    }
  >>
}
@end lilypond

両方の譜で同じ臨時記号スタイルを使うのなら、@c
この例の最後のブロックを以下で置き換えられます:

@c KEEP LY
@example
\new PianoStaff @{
  <<
    \context Staff = "up" @{
      %%% 次の行を変更したいスタイルに合わせて変更してください:
      \accidentalStyle Score.default
      \musicA
    @}
    \context Staff = "down" @{
      \musicB
    @}
  >>
@}
@end example


@c don't use verbatim in this table.
@table @code
@item default

@cindex default accidental style (default 臨時記号スタイル)
@cindex accidental style, default (default 臨時記号スタイル)

@funindex @sortas{defaultA} default

これはデフォルトの譜刻の仕方です。@c
これは 18 世紀の一般的な習慣と一致します:
臨時記号が有効なのは、その臨時記号が発生した小節の終わりまでで、@c
かつ、その臨時記号が発生したオクターブの中だけです。@c
そのため以下の例の中では、第 2 小節の @code{b} や最後の @code{c} の前には@c
ナチュラル記号は譜刻されていません:

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle default
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle default
      \musicB
    }
  >>
}
@end lilypond

@item voice

@cindex accidental style, voice (voice 臨時記号スタイル)
@cindex voice accidental style (voice 臨時記号スタイル)
@cindex accidental style, modern (modern 臨時記号スタイル)
@cindex modern accidental style (modern 臨時記号スタイル)
@cindex accidental style, modern-cautionary (modern-cautionary 臨時記号スタイル)
@cindex modern-cautionary accidental style (modern-cautionary 臨時記号スタイル)

@funindex voice

通常の臨時記号の付け方では、臨時記号は @code{Staff} レベルで保持されます。@c
しかしながらこのスタイルでは、臨時記号はそれぞれのボイスで別々に譜刻されます。@c
それを除けば、このスタイルの規則は @code{default} と同じです。

結果として、あるボイスからの臨時記号は他のボイスでキャンセルされず、@c
これはしばしば望まない結果となります:
以下の例では、2 番目の @code{a} をナチュラルで演奏するか、@c
シャープで演奏するかを決定するのは困難です。@c
そのため、@code{voice} オプションは、それぞれのボイスが別々の演奏者によって@c
個々に読まれる場合にのみ使用すべきです。@c
譜が 1 人の演奏者によって使用される場合 (例えば、指揮者やピアノ譜の場合)、@c
このスタイルの代わりに @code{modern} や @code{modern-cautionary} を@c
使用すべきです。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle voice
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle voice
      \musicB
    }
  >>
}
@end lilypond

@item modern

@cindex accidental, modern style (modern 臨時記号スタイル)
@cindex modern style accidental (modern 臨時記号スタイル)

@funindex modern

この規則は 20 世紀の一般的な臨時記号の付け方と一致します:
この規則はいくつかの余分なナチュラル記号を省略します
-- 伝統的にダブル シャープの後のシャープに前置されるナチュラル記号と、@c
ダブル フラットの後のフラットに前置されるナチュラル記号を省略します。@c

@code{modern} 規則の臨時記号の付け方は @code{default} とほぼ同じですが、@c
あいまいさを避けるための 2 つの規則が追加されます
 -- 一時的な臨時記号が使われると、
その後の小節で (同じオクターブにある音符に対して) キャンセル記号が@c
譜刻され、@c
臨時記号が使われた小節では他のオクターブにある音符にもキャンセル記号が@c
譜刻されます。@c
そのため、上部譜の第 2 小節の中にある @code{b} と @code{c} の前には@c
ナチュラルが付けられています:

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle modern
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle modern
      \musicB
    }
  >>
}
@end lilypond

@item modern-cautionary

@cindex accidental style, modern-cautionary (modern-cautionary 臨時記号スタイル)
@cindex modern-cautionary accidental style (modern-cautionary 臨時記号スタイル)

@funindex modern-cautionary

この規則は @code{modern} と似ていますが、@c
忠告的臨時記号として @q{追加の} 臨時記号が (括弧付きで) 譜刻されます。@c
これらの臨時記号は、@code{AccidentalCautionary} の @code{font-size}
プロパティをオーバライドすることで異なったサイズで表示することができます。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle modern-cautionary
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle modern-cautionary
      \musicB
    }
  >>
}
@end lilypond

@item modern-voice

@cindex accidental style, modern (modern 臨時記号スタイル)
@cindex accidental, multi-voice (多声の臨時記号)
@cindex modern accidental style (modern 臨時記号スタイル)
@cindex modern accidental (modern 臨時記号)
@cindex multi-voice accidental (多声の臨時記号)

@funindex modern-voice

この規則は多声の臨時記号として使用されます。@c
演奏家が複数の声部の中の 1 つの声部を演奏する場合にも、@c
すべての声部を演奏する場合にも使用されます。@c
臨時記号はそれぞれの声部に対して譜刻されますが、@c
同じ @code{Staff} の中であっても声部をまたいで@emph{キャンセルされます}。@c
そのため、最後の小節で @code{a} がキャンセルされています
 -- なぜなら、前のキャンセルは異なる声部で行われたからです。@c
さらに下部譜では @code{d} がキャンセルされています
 -- その臨時記号は前の小節の異なる声部で付けられたものだからです:

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle modern-voice
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle modern-voice
      \musicB
    }
  >>
}
@end lilypond

@cindex accidental style, modern-voice-cautionary (modern-voice-cautionary 臨時記号スタイル)
@cindex modern-voice-cautionary accidental style (modern-voice-cautionary 臨時記号スタイル)

@funindex modern-voice-cautionary

@item modern-voice-cautionary

この規則は @code{modern-voice} と同じですが、追加の臨時記号
(これは @code{voice} では譜刻されません)
は忠告として譜刻されます。@c
たとえ @code{default} で譜刻されるすべての臨時記号が@c
この規則でも譜刻されたとしても、@c
それらの臨時記号のいくつかは忠告として譜刻されます。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle modern-voice-cautionary
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle modern-voice-cautionary
      \musicB
    }
  >>
}
@end lilypond

@item piano

@cindex accidental style, piano (piano 臨時記号スタイル)
@cindex piano accidental style (piano 臨時記号スタイル)

@funindex piano

この規則は 20 世紀のピアノ譜の臨時記号のつけ方を反映しています。@c
このスタイルは @code{modern} スタイルと非常によく似ています。@c
しかしながらこのスタイルでは、@c
同じ @code{GrandStaff} または @code{PianoStaff} の中にある譜をまたがって@c
臨時記号はキャンセルされます。@c
そのため、最後の和音ではすべての音符でキャンセルが行われています。

この臨時記号スタイルは、@c
デフォルトで、@code{GrandStaff} や @code{PianoStaff} に適用されます。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle piano
      \musicA
    }
    \context Staff = "down" {
      \musicB
    }
  >>
}
@end lilypond

@item piano-cautionary

@cindex accidental style, piano-cautionary (piano-cautionary 臨時記号スタイル)
@cindex piano-cautionary accidental style (piano-cautionary 臨時記号スタイル)

@funindex piano-cautionary

この規則は @code{piano} と同じですが、追加の臨時記号は忠告として譜刻されます。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle piano-cautionary
      \musicA
    }
    \context Staff = "down" {
      \musicB
    }
  >>
}
@end lilypond

@item choral

@cindex accidental style, choral (choral 臨時記号スタイル)
@cindex choral accidental style (choral 臨時記号スタイル)

@funindex choral

このルールは @code{modern-voice} と @code{piano} の組み合わせです。@c
これは自身のボイスのみを追う歌手にとって必要な全ての臨時記号を表示し、@c
また @code{ChoirStaff} の全てのボイスを同時に追う読譜者のために追加の@c
臨時記号も表示します。

この臨時記号スタイルは @code{ChoirStaff} でデフォルトで適用されています。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new ChoirStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle choral
      \musicA
    }
    \context Staff = "down" {
      \musicB
    }
  >>
}
@end lilypond

@item choral-cautionary

@cindex accidental style, choral-cautionary (choral-cautionary 臨時記号スタイル)
@cindex choral-cautionary accidental style (choral-cautionary 臨時記号スタイル)

@funindex choral-cautionary

この規則は @code{choral} と同じですが、追加の臨時記号は忠告として譜刻されます。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new ChoirStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle choral-cautionary
      \musicA
    }
    \context Staff = "down" {
      \musicB
    }
  >>
}
@end lilypond

@item neo-modern

@cindex neo-modern accidental style (neo-modern 臨時記号スタイル)
@cindex accidental style, neo-modern (neo-modern 臨時記号スタイル)

@funindex neo-modern

この規則は現代音楽での一般的な臨時記号の付け方を再現します:
臨時記号は @code{modern} と同じように譜刻されますが、@c
同じ小節の中で臨時記号を付けられた音符と同じ音符が再び現れた場合、@c
その音符にも臨時記号が譜刻されます
 -- ただし、臨時記号を付けられた音符の直後に同じ音符が現れる場合は除きます
(訳者: 第 1 小節の下部譜にある 2 つの @code{f} には@c
両方とも臨時記号が譜刻されていますが、@c
第 1 小節の上部譜にある 2 つのミドル C は連続しているため、@c
後のミドル C には臨時記号が譜刻されません)。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle neo-modern
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle neo-modern
      \musicB
    }
  >>
}
@end lilypond

@item neo-modern-cautionary

@cindex neo-modern-cautionary accidental style (neo-modern-cautionary 臨時記号スタイル)
@cindex accidental style, neo-modern-cautionary (neo-modern-cautionary 臨時記号スタイル)

@funindex neo-modern-cautionary

この規則は @code{neo-modern} と似ていますが、@c
追加の臨時記号は忠告の臨時記号として (括弧付きで) 譜刻されます。@c
これらの臨時記号は、@code{AccidentalCautionary} の @code{font-size}
プロパティをオーバライドすることで異なったサイズで表示することができます。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle neo-modern-cautionary
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle neo-modern-cautionary
      \musicB
    }
  >>
}
@end lilypond

@item neo-modern-voice

@cindex neo-modern-voice accidental style (neo-modern-voice 臨時記号スタイル)
@cindex accidental style, neo-modern-voice (neo-modern-voice 臨時記号スタイル)

@funindex neo-modern-voice

この規則は、1 つのボイスを演奏する音楽家とすべてのボイスを演奏する音楽家@c
両方のための複数ボイスの臨時記号に使用されます。@c
@code{neo-modern} と同様に、臨時記号は各ボイスに譜刻されますが、@c
同じ @code{Staff} にあるボイスをまたがるとキャンセルされます。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle neo-modern-voice
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle neo-modern-voice
      \musicB
    }
  >>
}
@end lilypond

@item neo-modern-voice-cautionary

@cindex neo-modern-voice-cautionary accidental style (neo-modern-voice-cautionary 臨時記号スタイル)
@cindex accidental style, neo-modern-voice-cautionary (neo-modern-voice-cautionary 臨時記号スタイル)

@funindex neo-modern-voice-cautionary

この規則は @code{neo-modern-voice} と似ていますが、@c
追加の臨時記号が忠告の臨時記号として譜刻されます。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle neo-modern-voice-cautionary
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle neo-modern-voice-cautionary
      \musicB
    }
  >>
}
@end lilypond

@item dodecaphonic

@cindex dodecaphonic accidental style (dodecaphonic 臨時記号スタイル)
@cindex accidental style, dodecaphonic (dodecaphonic 臨時記号スタイル)

@funindex dodecaphonic

この規則は 20 世紀初頭の作曲家たちによって導入された臨時記号の付け方を@c
反映しています
 -- ナチュラルの音符と非ナチュラルの音符
(訳者: ピアノの白鍵に対応する音符と黒鍵に対応する音符)
間にある上下関係を無効にしようとする試みです。@c
このスタイルでは、@emph{すべて} の音符にナチュラル記号を含む臨時記号が@c
付けられます。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle dodecaphonic
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle dodecaphonic
      \musicB
    }
  >>
}
@end lilypond

@item dodecaphonic-no-repeat

@cindex dodecaphonic-no-repeat accidental style (dodecaphonic-no-repeat 臨時記号スタイル)
@cindex accidental style, dodecaphonic-no-repeat (dodecaphonic-no-repeat 臨時記号スタイル)

@funindex dodecaphonic-no-repeat

@code{dodecaphonic} と似て、通常@emph{全ての} 音符に臨時記号が譜刻されますが、@c
同じ譜の中でピッチが直後に繰り返される場合には譜刻されません。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle dodecaphonic-no-repeat
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle dodecaphonic-no-repeat
      \musicB
    }
  >>
}
@end lilypond


@item dodecaphonic-first

@cindex dodecaphonic-first accidental style (dodecaphonic-first 臨時記号スタイル)
@cindex accidental style, dodecaphonic-first (dodecaphonic-first 臨時記号スタイル) 

@funindex dodecaphonic-first

@code{dodecaphonic} と似て、通常@emph{全ての} 音符に臨時記号が譜刻されますが、@c
小節内で最初に出現したものに限られます。オクターブが異なるものは新たに@c
譜刻されますが、異なるボイスでも臨時記号の効果は持続します。

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle dodecaphonic-first
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle dodecaphonic-first
      \musicB
    }
  >>
}
@end lilypond

@item teaching

@cindex teaching accidental style (teaching 臨時記号スタイル)
@cindex accidental style, teaching (teaching 臨時記号スタイル)

@funindex teaching

この規則は学生向けを意図したものであり、@c
自動的に譜刻される忠告の臨時記号によって容易にスケール譜を作ることを@c
容易にします。@c
臨時記号は @code{modern} と同じように譜刻されます。@c
しかしながら、調号によって指定されたすべてのシャープ音、@c
フラット音に対して忠告の臨時記号が譜刻されます
 -- ただし、前の音符の直後にある同じピッチの音符は例外です。

@lilypond[quote,staffsize=18]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \key fis \minor
      \accidentalStyle teaching
      \musicA
    }
    \context Staff = "down" {
      \key fis \minor
      \accidentalStyle teaching
      \musicB
    }
  >>
}
@end lilypond



@item no-reset

@cindex accidental style, no-reset (no-reset 臨時記号スタイル)
@cindex no-reset accidental style (no-reset 臨時記号スタイル)

@funindex no-reset

この規則は @code{default} と同じですが、臨時記号の保持は小節内に限定されず、@c
@q{最後まで} 保持されます:

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle no-reset
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle no-reset
      \musicB
    }
  >>
}
@end lilypond

@item forget

@cindex forget accidental style (forget 臨時記号スタイル)
@cindex accidental style, forget (forget 臨時記号スタイル)

@funindex forget

この規則は @code{no-reset} と正反対です:
臨時記号はまったく保持されません
-- そのため、調号に対応しながら、前にある音楽とは無関係に@c
すべての臨時記号が譜刻されます。@c

@lilypond[quote]
musicA = {
  <<
    \relative {
      cis''8 fis, bes4 <a cis>8 f bis4 |
      cis2. <c, g'>4 |
    }
    \\
    \relative {
      ais'2 cis, |
      fis8 b a4 cis2 |
    }
  >>
}

musicB = {
  \clef bass
  \new Voice {
    \voiceTwo \relative {
      <fis a cis>8[ <fis a cis>
      \change Staff = up
      cis' cis
      \change Staff = down
      <fis, a> <fis a>]
      \showStaffSwitch
      \change Staff = up
      dis'4 |
      \change Staff = down
      <fis, a cis>4 gis <f a d>2 |
    }
  }
}

\new PianoStaff {
  <<
    \context Staff = "up" {
      \accidentalStyle forget
      \musicA
    }
    \context Staff = "down" {
      \accidentalStyle forget
      \musicB
    }
  >>
}
@end lilypond
@end table

@morerefs
コード断片集:
@rlsrnamed{Pitches,ピッチ}

内部リファレンス:
@rinternals{Accidental},
@rinternals{Accidental_engraver},
@rinternals{GrandStaff},
@rinternals{PianoStaff},
@rinternals{Staff},
@rinternals{AccidentalSuggestion},
@rinternals{AccidentalPlacement},
@rinternals{accidental-suggestion-interface}

@cindex accidental, and simultaneous notes (臨時記号と同時発生する音符)
@cindex simultaneous notes and accidentals (同時発生する音符と臨時記号)
@cindex accidental, in chords (和音の中の臨時記号)
@cindex chord, accidentals in (和音の中の臨時記号)

@knownissues
同時発生する音符はシーケンシャル モードで入力されたものと見なされます。@c
このことが意味するのは、和音の各音符は入力ファイルの中で記述された順に
1 つずつ発生するものとして、和音の臨時記号は譜刻されるということです。@c
これは和音の中の臨時記号が互いに依存関係にある場合に問題となります
-- この問題はデフォルトの臨時記号スタイルでは発生しません。@c
この問題は、問題となる音符に @code{!} や @code{?} を@c
手動で付け加えることによって解決できます。

臨時記号の忠告的なキャンセルは 1 つ前の小節を見て行われます。@c
しかしながら、@code{\repeat volta N} セクションの後にくる
@code{\alternative} ブロックでは、@c
キャンセルの算出はその前に @emph{譜刻された} 小節ではなく、@c
その前に @emph{演奏された} 小節を見て行われると演奏者は予想します。@c
以下の例では、2 番目の差し替え小節の中にあるナチュラル @code{c}
にナチュラル記号は必要ありません。

@lilypond[quote]
{
  \accidentalStyle modern
  \time 2/4
  \repeat volta 2 {
    c'2
  }
  \alternative {
     cis'
     c'
  }
}
@end lilypond

以下の方法で解決できます:
局部的に臨時記号スタイルを @code{forget} に変更する関数を定義します:

@lilypond[verbatim,quote]
forget = #(define-music-function (music) (ly:music?) #{
  \accidentalStyle forget
  #music
  \accidentalStyle modern
#})
{
  \accidentalStyle modern
  \time 2/4
  \repeat volta 2 {
    c'2
  }
  \alternative {
     cis'
     \forget c'
  }
}
@end lilypond


@node 音域
@unnumberedsubsubsec 音域
@translationof Ambitus

@cindex ambitus (音域)
@cindex range of pitches (ピッチの範囲)
@cindex pitch range (ピッチ範囲)

用語 @notation{音域} (ambitus) は、@c
音楽のある部分の中にあるボイスがとるピッチの範囲を示します。@c
さらに、ある楽器が演奏することができるピッチ範囲を@c
示すこともあるかもしれません。@c
音域をボーカル パートに譜刻することによって、@c
歌い手はそのパートの音域が歌い手の能力と一致するかどうかを@c
容易に見極めることができます。

音域は、楽曲の開始点で、最初の音部記号の近くに記されます。@c
範囲は最低ピッチと最高ピッチを表す 2 つの音符によって@c
グラフィカルに示されます。@c
臨時記号は、その臨時記号が調号の一部でない場合にのみ譜刻されます。

@lilypond[verbatim,quote]
\layout {
  \context {
    \Voice
    \consists Ambitus_engraver
  }
}

\relative {
  aes' c e2
  cis,1
}
@end lilypond


@snippets

@cindex ambitus, per voice (ボイスごとの音域)
@cindex voice, ambitus (ボイスと音域)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/adding-ambitus-per-voice.ly}

@cindex ambitus, multiple voices (複数ボイスでの音域)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/ambitus-with-multiple-voices.ly}

@cindex ambitus, line gap (音域の線の隙間)
@funindex AmbitusLine
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/changing-the-ambitus-gap.ly}


@morerefs
音楽用語集:
@rglos{ambitus}

コード断片集:
@rlsrnamed{Pitches,ピッチ}

内部リファレンス:
@rinternals{Ambitus_engraver},
@rinternals{Voice},
@rinternals{Staff},
@rinternals{Ambitus},
@rinternals{AmbitusAccidental},
@rinternals{AmbitusLine},
@rinternals{AmbitusNoteHead},
@rinternals{ambitus-interface}

@knownissues
複数のボイスがある場合にボイスごとに音域をとることによって生じる@c
音域の衝突を処理するシステムはありません。


@node 符頭
@subsection 符頭
@translationof Note heads

このセクションでは符頭を変更する方法について説明します。

@menu
* 特殊な符頭::
* 演奏を容易にする記譜法の符頭::
* シェイプ ノートの符頭::
* 即興::
@end menu

@node 特殊な符頭
@unnumberedsubsubsec 特殊な符頭
@translationof Special note heads

@cindex note head, special (特別な符頭)
@cindex note head, cross (×の符頭)
@cindex note head, diamond (ダイアモンド形の符頭)
@cindex note head, parlato (語りの符頭)
@cindex note head, harmonic (和音の符頭)
@cindex note head, guitar (ギターの符頭)
@cindex special note head (特別な符頭)
@cindex cross note head (×の符頭)
@cindex diamond note head (ダイアモンド形の符頭)
@cindex parlato note head (語りの符頭)
@cindex harmonic note head (和音の符頭)
@cindex guitar note head (ギターの符頭)
@cindex note head style (符頭のスタイル)
@cindex style, note heads (符頭のスタイル)

@funindex cross

符頭を変更することができます:

@lilypond[verbatim,quote]
\relative c'' {
  c4 b
  \override NoteHead.style = #'cross
  c4 b
  \revert NoteHead.style
  a b
  \override NoteHead.style = #'harmonic
  a b
  \revert NoteHead.style
  c4 d e f
}
@end lilypond

すべての符頭スタイルを調べるには、@ref{Note head styles} を参照してください。

@funindex \xNote
@funindex \xNotesOn
@funindex \xNotesOff

@code{cross} スタイルはさまざまな音楽的意図を表すために使用されます。@c
以下の定義済みコマンドは符頭を譜コンテキストとタブ譜コンテキストで変更し、@c
何らかの音楽的意味を表すために使用することができます:

@lilypond[verbatim,quote]
\relative {
  c''4 b
  \xNotesOn
   a b c4 b
  \xNotesOff
  c4 d
}
@end lilypond

この定義済みコマンドの音楽関数は、譜コンテキストやタブ譜コンテキストの@c
和音の内外で使用して、符頭を×の形にすることができます:

@lilypond[verbatim,quote]
\relative {
  c''4 b
  \xNote { e f }
  c b < g \xNote c f > b
}
@end lilypond

@funindex \deadNote
@funindex \deadNotesOn
@funindex \deadNotesOff

@code{\xNote}, @code{\xNotesOn} それに @code{\xNotesOff} の同義語として
@code{\deadNote}, @code{\deadNotesOn} それに @code{\deadNotesOff} を@c
使用することができます。@c
@notation{dead note} という用語はギタリストが一般的に使用します。

@funindex \harmonic

また、ダイアモンド形のための似たような短縮記法があります:

@lilypond[verbatim,quote]
\relative c'' {
  <c f\harmonic>2 <d a'\harmonic>4 <c g'\harmonic> f\harmonic
}
@end lilypond

@predefined
@code{\harmonic},
@code{\xNotesOn},
@code{\xNotesOff},
@code{\xNote}.
@endpredefined

@morerefs
コード断片集:
@rlsrnamed{Pitches,ピッチ}

記譜法リファレンス:
@ref{Note head styles},
@ref{Chorded notes},
@ref{Indicating harmonics and dampened notes}

内部リファレンス:
@rinternals{note-event},
@rinternals{Note_heads_engraver},
@rinternals{Ledger_line_engraver},
@rinternals{NoteHead},
@rinternals{LedgerLineSpanner},
@rinternals{note-head-interface},
@rinternals{ledger-line-spanner-interface}


@node 演奏を容易にする記譜法の符頭
@unnumberedsubsubsec 演奏を容易にする記譜法の符頭
@translationof Easy notation note heads

@cindex note head, practice (練習のための符頭)
@cindex practice note head (練習のための符頭)
@cindex note head, easy notation (演奏を容易にする記譜法の符頭)
@cindex easy notation (演奏を容易にする記譜法)
@cindex Hal Leonard
@cindex beginners' music (初心者のための楽譜)
@cindex music, beginners' (初心者のための楽譜)
@cindex easy play note head (演奏を容易にする符頭)
@cindex note head, easy play (演奏を容易にする符頭)

@funindex \easyHeadsOn
@funindex \easyHeadsOff

@q{演奏を容易にする} 符頭は、符頭の中に音符名を含みます。@c
これは、初心者のための楽譜で使用されます。@c
文字を読みやすくするために、大きなフォント サイズで譜刻すべきです。@c
大きなフォントで譜刻する方法は、@c
@ref{Setting the staff size} を参照してください。

@lilypond[verbatim,quote]
#(set-global-staff-size 26)
\relative c' {
  \easyHeadsOn
  c2 e4 f
  g1
  \easyHeadsOff
  c,1
}
@end lilypond


@predefined
@code{\easyHeadsOn},
@code{\easyHeadsOff}
@endpredefined


@snippets

@cindex easy notation, using numbers (演奏を容易にする記譜法で数字を使用する)
@cindex number, in easy notation (演奏を容易にする記譜法での数字)
@funindex Ez_numbers_engraver
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/numbers-as-easy-note-heads.ly}

@morerefs
記譜法リファレンス:
@ref{Setting the staff size}

コード断片集:
@rlsrnamed{Pitches,ピッチ}

内部リファレンス:
@rinternals{note-event},
@rinternals{Note_heads_engraver},
@rinternals{NoteHead},
@rinternals{note-head-interface}


@node シェイプ ノートの符頭
@unnumberedsubsubsec シェイプ ノートの符頭
@translationof Shape note heads

@cindex note head, shape (シェイプ ノートの符頭)
@cindex note head, Aiken (Aiken の符頭)
@cindex note head, Sacred Harp (Sacred Harp の符頭)
@cindex shape note (シェイプ ノート)
@cindex Aiken shape note head (Aiken のシェイプ ノートの符頭)
@cindex Sacred Harp note head (Sacred Harp の符頭)
@cindex note head, Southern Harmony (Southern Harmony の符頭)
@cindex Southern Harmony note head (Southern Harmony の符頭)
@cindex funk shape note head (Funk のシェイプ ノートの符頭)
@cindex note head, funk (Funk の符頭)
@cindex note head, Harmonia Sacra (Harmonia Sacra の符頭)
@cindex Harmonia Sacra note head (Harmonia Sacra の符頭)
@cindex Christian Harmony note head (Christian Harmony の符頭)
@cindex note head, Christian Harmony (Christian Harmony の符頭)
@cindex Walker shape note head (Walker のシェイプ ノートの符頭)
@cindex note head, Walker (Walker の符頭)

@funindex \aikenHeads
@funindex \aikenThinHeads
@funindex \sacredHarpHeads
@funindex \southernHarmonyHeads
@funindex \funkHeads
@funindex \walkerHeads

シェイプ ノート記譜法では、@c
符頭の形状は音階の中での音符の位置付けに対応します。@c
この表記は 19 世紀のアメリカの歌集で一般的なものです。@c
シェイプ ノートの符頭は Sacred Harp、Southern Harmony、@c
Funk (Harmonia Sacra)、Walker、それに Aiken (Christian Harmony) スタイルで@c
使用されます:

@lilypond[verbatim,quote]
\relative c'' {
  \aikenHeads
  c, d e f g2 a b1 c \break
  \aikenThinHeads
  c,4 d e f g2 a b1 c \break
  \sacredHarpHeads
  c,4 d e f g2 a b1 c \break
  \southernHarmonyHeads
  c,4 d e f g2 a b1 c \break
  \funkHeads
  c,4 d e f g2 a b1 c \break
  \walkerHeads
  c,4 d e f g2 a b1 c \break
}
@end lilypond

@funindex \key
@funindex \aikenHeadsMinor
@funindex \aikenThinHeadsMinor
@funindex \sacredHarpHeadsMinor
@funindex \southernHarmonyHeadsMinor
@funindex \funkHeadsMinor
@funindex \walkerHeadsMinor

符頭の形状は音階の中での位置に対応し、@c
音階のベースは @code{\key} コマンドによって決まります。@c
マイナーで記述している場合、@c
符頭の形状を決定する音階ステップはメジャーの場合との相対関係になります:

@lilypond[verbatim,quote]
\relative c'' {
  \key a \minor
  \aikenHeads
  a b c d e2 f g1 a \break
  \aikenHeadsMinor
  a,4 b c d e2 f g1 a \break
  \aikenThinHeadsMinor
  a,4 b c d e2 f g1 a \break
  \sacredHarpHeadsMinor
  a,2 b c d \break
  \southernHarmonyHeadsMinor
  a2 b c d \break
  \funkHeadsMinor
  a2 b c d \break
  \walkerHeadsMinor
  a2 b c d \break
}
@end lilypond

@predefined
@code{\aikenHeads},
@code{\aikenHeadsMinor},
@code{\aikenThinHeads},
@code{\aikenThinHeadsMinor},
@code{\funkHeads},
@code{\funkHeadsMinor},
@code{\sacredHarpHeads},
@code{\sacredHarpHeadsMinor},
@code{\southernHarmonyHeads},
@code{\southernHarmonyHeadsMinor},
@code{\walkerHeads},
@code{\walkerHeadsMinor}
@endpredefined

@snippets

@cindex note head, Aiken, thin variant (細い Aiken の符頭)
@cindex Aiken shape note head, thin variant (細い Aiken のシェイプ ノートの符頭)
@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/aiken-head-thin-variant-noteheads.ly}

@lilypondfile[verbatim,quote,texidoc,doctitle]
{snippets/applying-note-head-styles-depending-on-the-step-of-the-scale.ly}

すべての符頭スタイルを調べるには、@ref{Note head styles} を参照してください。

@morerefs
コード断片集:
@rlsrnamed{Pitches,ピッチ}

記譜法リファレンス:
@ref{Note head styles}

内部リファレンス:
@rinternals{note-event},
@rinternals{Note_heads_engraver},
@rinternals{NoteHead},
@rinternals{note-head-interface}


@node 即興
@unnumberedsubsubsec 即興
@translationof Improvisation

@cindex improvisation (即興)
@cindex slashed note head (スラッシュ形の符頭)
@cindex note head, improvisation (即興の符頭)
@cindex note head, slashed (スラッシュ形の符頭)

@funindex \improvisationOn
@funindex \improvisationOff

即興はしばしばスラッシュ形の符頭で記されます。@c
そのような表記では、演奏者は好みのピッチを選ぶことができますが、@c
指定されたリズムに従って演奏する必要があります。@c
このような符頭は以下のようにして作成することができます:

@lilypond[verbatim,quote]
\new Voice \with {
  \consists Pitch_squash_engraver
} \relative {
  e''8 e g a a16( bes) a8 g
  \improvisationOn
  e8 ~
  2 ~ 8 f4 f8 ~
  2
  \improvisationOff
  a16( bes) a8 g e
}
@end lilypond

@predefined
@code{\improvisationOn},
@code{\improvisationOff}
@endpredefined

@morerefs
コード断片集:
@rlsrnamed{Pitches,ピッチ}

内部リファレンス:
@rinternals{Pitch_squash_engraver},
@rinternals{Voice},
@rinternals{RhythmicStaff}
