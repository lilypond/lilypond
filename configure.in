dnl configure.in   -*-shell-script-*-
dnl Process this file with autoconf to produce a configure script. 

# Bootstrap the init proces.  List a file identifies your package.
AC_INIT(make/lilypond.lsm.in)
AC_CONFIG_HEADER($CONFIGFILE.h:config.hh.in)

# Bootstrap StepMake configure
AC_STEPMAKE_INIT

# For all packages except the StepMake package itself
AC_CONFIG_SUBDIRS(stepmake)

# Uncomment the configuration options your package needs.
AC_STEPMAKE_COMPILE
# AC_HAVE_HEADERS(limits.h malloc.h string.h unistd.h values.h)

printing_b=no
guile_b=no
AC_ARG_ENABLE(printing,
    [  enable-printing         turn on debug printing. Default: off],
    [printing_b=$enableval])
AC_ARG_ENABLE(guile,
    [  enable-guile            link in GUILE. Default: off],
    [guile_b=$enableval])

    
if test "$optimise_b" = yes; then
    DEFINES="$DEFINES -DSTRING_UTILS_INLINED"
    AC_DEFINE(STRINGS_UTILS_INLINED)
fi

AC_STEPMAKE_CXX
AC_STEPMAKE_GXX
AC_STEPMAKE_CXXTEMPLATE
AC_STEPMAKE_LEXYACC
AC_STEPMAKE_LIB
# AC_STEPMAKE_LIBTOOL
AC_STEPMAKE_LOCALE
AC_STEPMAKE_GETTEXT
AC_STEPMAKE_MSGFMT
AC_STEPMAKE_TEXMF
# AC_STEPMAKE_TEXMF_DIRS
AC_STEPMAKE_YODL


dnl should check out -print
dnl huh?
dnl AC_CHECK_SEARCH_RESULT($FIND, find, Please use --enable-tex-dir)

case $guile_b in 
    yes)
    AC_CHECK_LIB(guile, scm_shell)

    ;;
esac
    
AC_FUNC_MEMCMP
AC_FUNC_VPRINTF
AC_CHECK_FUNCS(memmem snprintf vsnprintf gettext)

AC_DEFINE_UNQUOTED(TOPLEVEL_VERSION, "${FULL_VERSION}")
AC_DEFINE_UNQUOTED(FLOWER_VERSION, "${FULL_FLOWER_VERSION}")

AC_CHECK_PROGS(MAKEINFO, makeinfo, error)
AC_CHECK_SEARCH_RESULT($YODL2TEXINFO, yodl,  
    You should install Yodl 1.30.2 or better)

AC_STEPMAKE_END

